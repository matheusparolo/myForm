<h1>Pesquisas</h1>

<a href="/pesquisa/criar">Criar Pesquisa</a>

<div>

    {loop="$researches"}

        {$id = $value["researchEntity"]->getId()}
        {$creatorID = $value["researchEntity"]->getCreatorId()}

        <div class="research">

            <div class="research-infos">
                <p>Nome: {$value["creator_name"]}</p>
                <p>Criador: {$value["researchEntity"]->getName()}</p>
            </div>

            <div class="research-actions">

                <a href="/pesquisa/{$id}">Visualizar</a>
            {if="$userID == $creatorID"}
                <a href="/pesquisa/{$id}/editar">Editar</a>
                <a onclick="delete_research({$id})" >Deletar</a>
            {/if}

            </div>

        </div>

    {/loop}

</div>

<script>

    function delete_research(id)
    {

        if(confirm("Deseja realmente deletar essa pesquisa?"))
        {


            $.post("/pesquisa/deletar", {

                "id": id

            }, function(data){

                show_response(data);

            });
        }

    }

    codes = {
        "000" : "/pesquisa",
        "200" : "Problema com o banco de dados, tente novamente mais tarde!",
        "400" : "Você não possui o acesso necessário para realizar está operação!"
    }

</script>

<style>
    a{
        cursor: pointer;
        text-decoration: underline;
        color: blue;
    }
    .research
    {
        padding: 10px;
        border: 1px solid black;
        width: 40%;
    }
    .research-infos, .research-actions
    {
        display: inline-block;
    }
    .research-infos p
    {
        margin: 0;
    }
</style>